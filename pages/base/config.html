/**
* -----------------------------------------------------------------------------
* @package     smartVISU
* @author      Martin Gleiss, Alexander Schwithal
* @copyright   2012 - 2016
* @license     GPL [http://www.gnu.de]
* -----------------------------------------------------------------------------
*/


{% extends "system.html" %}

{% block content %}

	/** related JavaScript part located in lib/base/base.js */

	<h1>Configuration</h1>

	{% import "forms.html" as forms %}
	<form>

	<div data-role="tabs" id="config_source">
		<div data-role="navbar">
			<ul>
				<li data-source="global"><a href="#config_tab_global" data-ajax="false" class="ui-btn-active">Global</a></li>
				<li data-source="pages"><a href="#config_tab_pages" data-ajax="false">Pages '{{ config_pages }}'</a></li>
				<li data-source="cookie"><a href="#config_tab_cookie" data-ajax="false">Client (cookie)</a></li>
			</ul>
		</div>
		<div id="config_tab_global">
			<h2>Global options (stored in './config.ini')</h2>
		</div>
		<div id="config_tab_pages">
			<h2>Options for current pages '{{ config_pages }}' (stored in './pages/{{ config_pages }}/config.ini')</h2>
      {{ basic.symbol('','','','jquery_info.svg') }}<i>Click label to override specific option, click again to deactive overriding</i>
		</div>
		<div id="config_tab_cookie">
			<h2><i>Options stored on client (as cookie)</i></h2>
      {{ basic.symbol('','','','jquery_info.svg') }}<i>Click label to override specific option, click again to deactive overriding</i>
		</div>
	</div>

	<fieldset>

	<div class="block">
		<div class="set-2" data-role="collapsible-set" data-content-theme="a" data-mini="true">

			<div class="ui-bar-c ui-corner-top ui-collapsible-caption">
				<h3 class="ui-collapsible-heading">User Interface</h3>
			</div>

			<div data-role="collapsible" data-collapsed="false" data-theme="c" data-content-theme="a">
				<h3>Interface</h3>

				<div data-role="fieldcontain">
					<label for="pages">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Pages
							</label>
						</fieldset>
					</label>
					<select name="pages" id="pages" data-native-menu="false">
						{% for file in dir('pages', '^(?!base|apps)(.+?)') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
				</div>

				<div data-role="fieldcontain">
					<label for="design">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Design
							</label>
						</fieldset>
					</label>
					<select name="design" id="design" data-native-menu="false">
						{% for file in dir('designs', '(.+?).css') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="cache">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Pagecache
							</label>
						</fieldset>
					</label>
					<select name="cache" id="cache" data-role="flipswitch">
						<option value="false">off</option>
						<option value="true">on</option>
					</select>
					
					<button type="button" data-theme="a" data-icon="delete" data-inline="true" id="clear_cache" class="ui-micro">Clear Pagecache</button>
				</div>

				<div data-role="fieldcontain">
					<label for="animation">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Animation
							</label>
						</fieldset>
					</label>
					<select name="animation" id="animation" data-role="flipswitch">
						<option value="false">off</option>
						<option value="true">on</option>
					</select>
				</div>

			</div>

			<div data-role="collapsible" data-collapsed="true" data-theme="c" data-content-theme="a" >
				<h3>Texts</h3>

				<div data-role="fieldcontain">
					<label for="title">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Title
							</label>
						</fieldset>
					</label>
					<input type="text" name="title" id="title" />
					
				</div>

				<div data-role="fieldcontain">
					<label for="lang">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Language
							</label>
						</fieldset>
					</label>
					<select name="lang" id="lang" data-native-menu="false">
						{% set langtext = {
							'en': 'English (US)',
							'en-gb': 'English (GB)',
							'de': 'German',
							'de-ch': 'German (Switzerland)',
							'nl': 'Dutch',
							'fr': 'Fran√ßais'
						} %}
						/**
						<option value="en">English (US)</option>
						<option value="en-uk">English (UK)</option>
						<option value="de">German</option>
						<option value="de-ch">German (Switzerland)</option>
						<option value="nl">Dutch</option>
						<option value="fr">Fran&ccedil;ais</option>
						*/
						{% for file in dir('lang', '^(.*?)\.ini$') %}
							<option value="{{ file.name }}">{{ langtext[file.name] ?? file.name }}</option>
						{% endfor %}
					</select>

					<div class="note">*for some widgets</div>
					
				</div>

				<div data-role="fieldcontain">
					<label for="timesource">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Time Source
							</label>
						</fieldset>
					</label>
					<div class="ui-help-container">
						<a href="#popupBasic" data-rel="popup" class="ui-help-icon" data-transition="pop"><img class="icon icon1" src="icons/ws/message_help.svg"></a>
						<div data-role="popup" id="popupBasic" data-arrow="true" data-theme="c">
							Which time should be shown by clock widgets?<br>
							'client' = your local time<br>
							'server' = time of server smartVISU runs on
						</div>
						<select name="timesource" id="timesource" data-native-menu="false">
							<option value="client">Client</option>
							<option value="server">Server</option>
						</select>
						<div class="note">*for clock widgets</div>
					</div>
				</div>

			</div>

		</div>
	</div>


	<div class="block">
		<div class="set-1" data-role="collapsible-set" data-mini="true">

			<div class="ui-bar-c ui-corner-top ui-collapsible-caption">
				<h3 class="ui-collapsible-heading">Facility Backend</h3>
			</div>

			<div data-role="collapsible" data-collapsed="false" data-theme="c" data-content-theme="a">
				<h3>I/O-Connection</h3>

				<div data-role="fieldcontain">
					<label for="driver">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Driver
							</label>
						</fieldset>
					</label>
					<select name="driver" id="driver" data-native-menu="false">
						{% for file in dir('driver', '^io_(.+?).js') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="driver_address">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Address
							</label>
						</fieldset>
					</label>
					<input type="text" name="driver_address" id="driver_address" style="letter-spacing: 0.1em;" />
					<div class="note">Hostname / IP</div>

				</div>

				<div data-role="fieldcontain">
					<label for="driver_port">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Port
							</label>
						</fieldset>
					</label>
					<input type="text" name="driver_port" id="driver_port" />
					
				</div>

				<div data-role="fieldcontain">
					<label for="driver_realtime">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Realtime
							</label>
						</fieldset>
					</label>
					<select name="driver_realtime" id="driver_realtime" data-role="flipswitch">
						<option value="false">off</option>
						<option value="true">on</option>
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="driver_autoreconnect">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Reconnect
							</label>
						</fieldset>
					</label>
					<select name="driver_autoreconnect" id="driver_autoreconnect" data-role="flipswitch">
						<option value="false">off</option>
						<option value="true">on</option>
					</select>
					
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$('#driver').change(function () {
			switch (this.value) {
				case 'offline':
					$('#driver_realtime').val('false').flipswitch('refresh');
					$('#driver_autoreconnect').val('false').flipswitch('refresh');
					break;

				case 'eibd':
					$('#driver_autoreconnect').val('false').flipswitch('refresh');
					break;

				case 'json':
					$('#driver_autoreconnect').val('false').flipswitch('refresh');
					break;

				case 'linknx':
					$('#driver_port').val('1028');
					$('#driver_autoreconnect').val('false').flipswitch('refresh');
					break;

				case 'smarthome.py':
					$('#driver_port').val('2424');
					$('#driver_realtime').val('true').flipswitch('refresh');
					$('#driver_autoreconnect').val('true').flipswitch('refresh');
					break;

				case 'domotiga':
					$('#driver_port').val('2121');
					$('#driver_realtime').val('true').flipswitch('refresh');
					$('#driver_autoreconnect').val('true').flipswitch('refresh');
					break;
			}
		});
	</script>


	<div class="block">
		<div class="set-3" data-role="collapsible-set" data-content-theme="a" data-mini="true">

			<div class="ui-bar-c ui-corner-top ui-collapsible-caption">
				<h3 class="ui-collapsible-heading">Data Services</h3>
			</div>

			<div data-role="collapsible" data-collapsed="false" data-theme="c" data-content-theme="a">
				<h3>Weather</h3>

				<div data-role="fieldcontain">
					<label for="weather_service">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Service
							</label>
						</fieldset>
					</label>
					<select name="weather_service" id="weather_service" data-native-menu="false">
						{% for file in dir('lib/weather/service', '(.+?).php') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="weather_location">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Location
							</label>
						</fieldset>
					</label>
					<input type="text" name="weather_location" id="weather_location" />
					
				</div>

				<div data-role="fieldcontain">
					<label for="weather_key">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Key
							</label>
						</fieldset>
					</label>
					<input type="text" name="weather_key" id="weather_key" />

					<div class="note">*if service requires one</div>
					
				</div>
			</div>

			<div data-role="collapsible" data-theme="c" data-content-theme="a">
				<h3>Phone</h3>

				<div data-role="fieldcontain">
					<label for="phone_service">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								System
							</label>
						</fieldset>
					</label>
					<select name="phone_service" id="phone_service" data-native-menu="false">
						{% for file in dir('lib/phone/service', '(.+?).php') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="phone_server">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Address
							</label>
						</fieldset>
					</label>
					<input type="text" name="phone_server" id="phone_server" style="letter-spacing: 0.1em;" />
					<div class="note">Hostname / IP</div>

				</div>

				<div data-role="fieldcontain">
					<label for="phone_port">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Port
							</label>
						</fieldset>
					</label>
					<input type="text" name="phone_port" id="phone_port" />
					
					<div class="note">*if service requires one</div>
				</div>

				<div data-role="fieldcontain">
					<label for="phone_user">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								User
							</label>
						</fieldset>
					</label>
					<input type="text" name="phone_user" id="phone_user" />
					
				</div>

				<div data-role="fieldcontain">
					<label for="phone_pass">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Password
							</label>
						</fieldset>
					</label>
					<input type="password" name="phone_pass" id="phone_pass" />
					
				</div>
			</div>

			<div data-role="collapsible" data-theme="c" data-content-theme="a">
				<h3>Calendar</h3>

				<div data-role="fieldcontain">
					<label for="calendar_service">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								System
							</label>
						</fieldset>
					</label>
					<select name="calendar_service" id="calendar_service" data-native-menu="false">
						{% for file in dir('lib/calendar/service', '(.+?).php') %}
							<option value="{{ file.name }}">{{ file.label }}</option>
						{% endfor %}
					</select>
					
				</div>

				<div data-role="fieldcontain">
					<label for="calendar_url">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Url
							</label>
						</fieldset>
					</label>
					<input type="text" name="calendar_url" id="calendar_url" />
					
					<div class="note">*not used for iCloud</div>
				</div>

				<div data-role="fieldcontain">
					<label for="calendar_username">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Username
							</label>
						</fieldset>
					</label>
					<input type="text" name="calendar_username" id="calendar_username" />

					<div class="note">*if service requires one</div>
				</div>

				<div data-role="fieldcontain">
					<label for="calendar_password">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Password
							</label>
						</fieldset>
					</label>
					<input type="password" name="calendar_password" id="calendar_password" />

					<div class="note">*if service requires one</div>
				</div>

				<div data-role="fieldcontain">
					<label for="calendar_name">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Calendar name
							</label>
						</fieldset>
					</label>
					<input type="text" name="calendar_name" id="calendar_name" />

					<div class="note">*if service requires one</div>
				</div>
			</div>

		</div>
	</div>

	<div class="block">
		<div class="set-1" data-role="collapsible-set" data-content-theme="a" data-mini="true">

			<div class="ui-bar-c ui-corner-top ui-collapsible-caption">
				<h3 class="ui-collapsible-heading">Internet Access (serverside)</h3>
			</div>

			<div data-role="collapsible" data-collapsed="false" data-theme="c" data-content-theme="a" >
				<h3>Proxy</h3>
				<div data-role="fieldcontain">
					<label for="proxy">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Use Proxy
							</label>
						</fieldset>
					</label>
					<select name="proxy" id="proxy" data-role="flipswitch">
						<option value="false">off</option>
						<option value="true">on</option>
					</select>
					
				</div>
				<div data-role="fieldcontain">
					<label for="proxy_url">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Url
							</label>
						</fieldset>
					</label>
					<input type="text" name="proxy_url" id="proxy_url" />
					
				</div>
				<div data-role="fieldcontain">
					<label for="proxy_user">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								User
							</label>
						</fieldset>
					</label>
					<input type="text" name="proxy_user" id="proxy_user" />
					
				</div>
				<div data-role="fieldcontain">
					<label for="proxy_password">
						<fieldset data-role="controlgroup" data-type="horizontal">
							<label>
								<input type="checkbox" data-mini="true">
								Password
							</label>
						</fieldset>
					</label>
					<input type="password" name="proxy_password" id="proxy_password" />
					
				</div>
			</div>

		</div>
	</div>

	</fieldset>

	<input type="hidden" id="current_pages" value="{{ config_pages }}" />
	<button type="submit" data-theme="b" data-icon="grid" name="submit" value="1">Save</button>
	</form>

{% endblock %}